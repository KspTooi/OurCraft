# **研发日志 1.2G15 \- JME引擎**

发布时间：2025-02-01  
版本代号：1.2G15  
关键词：架构重构、客户端、JMonkeyEngine、LWJGL、LibGDX、决策

## **第一段：1.2G15 近况**

写这篇日志的时候，我看了一眼 1.0 版本的记录。那时候搞 OurCraft 纯粹是大家无聊写着玩的。当初选 **LWJGL** 也没想太多，就是看 Minecraft 也在用，觉得既然偶像能用这个做成神作，我们照着学肯定没错。那时候从零开始写 OpenGL 指令、自己管显存，感觉还挺有成就感的。  
但到了 1.2 版本，情况完全不一样了。这项目现在有了复杂的 ECS 实体系统、高精度的物理模拟，还是正经的 C/S 架构。这时候再用那个手写的“玩具级”客户端去对接这么复杂的工业级服务端，我们发现根本搞不定。

### **第一步：分析**

之前直接用 LWJGL 开发，初衷是想对底层全权控制。但这现在变成了最大的绊脚石：

1. **重复造轮子**：想做个按钮或者输入框，得写好几千行代码算坐标、处理点击。以前觉得好玩，现在觉得纯属浪费时间。
2. **维护太累**：服务端加个新功能，客户端就得跟着改底层渲染代码，太繁琐了。
3. **开发太慢**：工程师跟我说，按现在的速度，要把客户端功能补齐追上服务端，根本不知道要猴年马月。我们现在的状态不仅是在写游戏，简直是在写半个游戏引擎。

需要认清的一个现实是：到底是为了所谓的“情怀”死磕，还是承认现在需要更快的工具？

### **第二步：计划**

经过讨论，我们做了一个大胆的决定：**完全废弃掉那个基于 LWJGL 手写的旧客户端（client），另起炉灶，用 JMonkeyEngine (JME) 从头构建一个新的客户端（我们内部叫它 clientJ）。**  
做决定前我们也试过 LibGDX，但发现它还是偏 2D，搞 3D 沙盒还得自己造很多轮子。而 JME 是专门搞 3D 的，虽然这意味着我们得重写所有客户端逻辑，但长远来看，这能让我们拥有更好的画面表现，后期的研发速度也能直接起飞。与其现在修修补补，不如一次痛到底，换个更好的底座，反正这种事情我们已经做过无数次了。

### **第三步：实现**
这是游戏开发中最辛苦的部分

虽然换了引擎，但接下来的活一点都不轻。**JME 只是引擎，游戏的业务逻辑它变不出来。**  
新的 JME 客户端（我们叫它 clientj）在逻辑上其实还是从零开始。现在的服务端（1.2G2）已经很成熟了，有双精度物理、ECS、Netty 网络栈和动态区块管理。我们需要把这些已经做好的功能，在 JME 的框架下重新实现一遍对接逻辑。网络同步、位置插值、地形网格生成，都得重写。  
工作量非常巨大，但为了以后能跑得快，现在的麻烦是值得的。

## **第二段：未来规划**

这个决定意味着之前在 client 包里的很多渲染代码就作废了。大家也要重新学 JME 怎么用。但走了这一步，我们就能把精力花在**怎么让游戏更好玩**上，而不是整天折腾底层代码。