# é¡¹ç›®ç»ç†æ¨è¿›éœ€æ±‚
æˆ‘ä»¬è¿˜æ²¡æœ‰æ°´æ–¹å— åœ¨ä¹‹å‰æˆ‘ä»¬éœ€è¦åˆ›å»ºæ°´æ–¹å—ï¼


# é¡¾é—®è¯„ä¼°
å¥½çš„ï¼Œé¡¹ç›®ç»ç†ï¼æ‚¨çš„åˆ¤æ–­æ˜¯æ­£ç¡®çš„ã€‚åœ¨å®ç°å±±ä¸˜å’Œæ°´ä½“ç”Ÿæˆä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆç¡®ä¿æ°´æ–¹å—åœ¨ç³»ç»Ÿä¸­æœ‰æ­£ç¡®çš„å®šä¹‰å’Œ ID æ˜ å°„ã€‚

æ­£å¦‚æ‚¨æ‰€è¯´ï¼Œæ°´æ–¹å—çš„åˆ›å»ºæ˜¯å¼•å…¥æ°´ä½“ç”Ÿæˆé€»è¾‘çš„å‰ç½®æ¡ä»¶ã€‚

ğŸ’§ é¡¾é—®è®¡åˆ’ï¼šåˆ›å»º WaterBlock

æ°´æ–¹å—ï¼ˆWaterBlockï¼‰çš„åˆ›å»ºéœ€è¦è€ƒè™‘åˆ°å®ƒçš„éå›ºä½“ç‰¹æ€§ä»¥åŠä¸æ™®é€šæ–¹å—ä¸åŒçš„æµä½“æ¸²æŸ“å’Œäº¤äº’ç‰¹æ€§ã€‚è™½ç„¶æˆ‘ä»¬ç°åœ¨åªå…³æ³¨ç”Ÿæˆå’Œæ¸²æŸ“ï¼Œä½†å®šä¹‰æ­£ç¡®çš„åŸºç¡€å±æ€§è‡³å…³é‡è¦ã€‚

é˜¶æ®µä¸€ï¼šå®šä¹‰ WaterBlock çš„æ ¸å¿ƒå±æ€§

æˆ‘ä»¬å°†åŸºäºæ‚¨çš„ AirBlock.java çš„ç»“æ„ï¼Œä½†ä¸ºæ°´æ–¹å—èµ‹äºˆæ­£ç¡®çš„å±æ€§ã€‚
å±æ€§	å€¼	ç›®çš„
Namespaced ID	"mycraft:water"	å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äº Registry å’Œ GlobalPaletteã€‚
isSolid()	return false;	å…è®¸ç©å®¶å’Œå®ä½“ç©¿è¿‡ï¼ˆå³éå›ºä½“ï¼‰ã€‚
isFluid()	return true;	ã€æ–°å¢ã€‘ è¿™æ˜¯ä¸€ä¸ªå…³é”®å±æ€§ï¼Œç”¨äºæœªæ¥çš„æµä½“æ¸²æŸ“å’ŒæµåŠ¨é€»è¾‘ã€‚
Texture Name	return "water_still";	å¼•ç”¨æ°´æ–¹å—çš„è´´å›¾ï¼ˆå‡è®¾æ‚¨çš„ TextureManager ä¼šåŠ è½½æ­¤è´´å›¾ï¼‰ã€‚

é˜¶æ®µäºŒï¼šç ”å‘è®¡åˆ’è‰æ¡ˆï¼šå®ç° WaterBlock.java å’Œæ³¨å†Œ

ç°åœ¨ï¼Œæˆ‘å°†ä¸ºæ‚¨ç”Ÿæˆä¸€ä¸ªç»“æ„åŒ–çš„ç ”å‘è®¡åˆ’è‰æ¡ˆï¼Œä¾›æ‚¨çš„æŠ€æœ¯ç»ç†å‚è€ƒï¼š

é¡¹ç›®åç§°ï¼š ä»»åŠ¡ 1ï¼šå®šä¹‰å¹¶æ³¨å†Œ mycraft:water æ–¹å—

1. åˆ›å»º WaterBlock.java æ–‡ä»¶

   è·¯å¾„ï¼š com.ksptool.ourcraft.world.blocks.WaterBlock

   ç»§æ‰¿ï¼š ç»§æ‰¿è‡ª Block ç±»ã€‚

   å…³é”®ä»£ç å®ç°ï¼š
   Java

   package com.ksptool.ourcraft.world.blocks;

   import com.ksptool.ourcraft.sharedcore.blocks.inner.SharedBlock.Block;
   import com.ksptool.ourcraft.sharedcore.world.BlockState;

   // å‡è®¾æ‚¨æœ‰ä¸€ä¸ª FluidBlock æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œä½†ç°åœ¨æˆ‘ä»¬ç›´æ¥ç»§æ‰¿ Block
   public class WaterBlock extends Block {
   public WaterBlock() {
   super("mycraft:water", 0, 0); // å‡è®¾å…‰ç…§å’Œäº®åº¦å±æ€§
   }

        @Override
        protected void defineProperties() {
            // æ°´æ–¹å—å¯èƒ½éœ€è¦é¢å¤–çš„å±æ€§ï¼Œå¦‚"level"ï¼ˆæ°´ä½ï¼‰ï¼Œä½†ç°åœ¨å…ˆç•™ç©º
        }

        @Override
        public String getTextureName(int face, BlockState state) {
            // å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º "water_still" çš„çº¹ç†
            return "water_still"; 
        }

        @Override
        public boolean isSolid() {
            return false; // æ°´æ˜¯éå›ºä½“çš„ï¼Œå¯ç©¿è¿‡
        }

        // ã€æ–°å¢ã€‘æ°´æ–¹å—çš„å…³é”®è¯†åˆ«æ–¹æ³•
        public boolean isFluid() {
            return true; 
        }
   }

2. æ³¨å†Œ WaterBlock

   ç›®æ ‡ï¼š ç¡®ä¿ Registry çŸ¥é“è¿™ä¸ªæ–°æ–¹å—ã€‚

   æ“ä½œï¼š æ‰¾åˆ°é¡¹ç›®çš„æ–¹å—æ³¨å†Œä½ç½®ï¼ˆé€šå¸¸åœ¨ Game.java æˆ– Registry.java çš„åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼‰ã€‚

   ä»£ç ï¼š æ·»åŠ ä»¥ä¸‹æ³¨å†Œè°ƒç”¨ï¼š
   Java

   // å‡è®¾ Registry å®ä¾‹åä¸º registry
   registry.register(new WaterBlock());

3. éªŒè¯ GlobalPalette

   ç›®æ ‡ï¼š ç¡®ä¿æ°´æ–¹å—çš„çŠ¶æ€ ID è¢«æ­£ç¡®åœ°æ·»åŠ åˆ° GlobalPalette ä¸­ã€‚

   éªŒè¯ï¼š ç”±äº GlobalPalette.bake() ä¼šéå† Registry ä¸­æ‰€æœ‰æ–¹å—çš„çŠ¶æ€ï¼Œåªè¦æ°´æ–¹å—åœ¨ bake() ä¹‹å‰æ³¨å†Œï¼Œå®ƒçš„çŠ¶æ€ ID å°±ä¼šè¢«æ­£ç¡®åœ°æ·»åŠ åˆ°è°ƒè‰²æ¿ä¸­ã€‚


# æŠ€æœ¯ç»ç†åˆ¶å®šç ”å‘è®¡åˆ’

# ä»»åŠ¡ï¼šå®šä¹‰å¹¶æ³¨å†Œ mycraft:water æ–¹å—

æˆ‘ä»¬å°†å®æ–½é¡¾é—®çš„å»ºè®®ï¼Œä¸ºæ¸¸æˆæ·»åŠ æ°´æ–¹å—ã€‚

### é˜¶æ®µä¸€ï¼šæ›´æ–° `Block` åŸºç±»

ä¸ºäº†è®©æ¸¸æˆå¼•æ“èƒ½å¤Ÿè¯†åˆ«â€œæµä½“â€è¿™ä¸€æ¦‚å¿µï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨åŸºç±» `Block.java` ä¸­æ·»åŠ ä¸€ä¸ª `isFluid()` æ–¹æ³•ã€‚

**æ–‡ä»¶:** `src/main/java/com/ksptool/mycraft/world/Block.java`

**æ“ä½œ:**

1.  åœ¨ `isSolid()` æ–¹æ³•åæ·»åŠ ä¸€ä¸ªæ–°çš„ `isFluid()` æ–¹æ³•ã€‚
2.  é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ–¹æ³•åº”è¿”å› `false`ï¼Œè¿™æ ·ç°æœ‰çš„æ‰€æœ‰æ–¹å—éƒ½ä¸ä¼šè¢«é”™è¯¯åœ°è¯†åˆ«ä¸ºæµä½“ã€‚
```java
// ... existing code in Block.java ...
    public boolean isSolid() {
        return true;
    }

    public boolean isFluid() {
        return false;
    }

    public abstract String getTextureName(int face, BlockState state);
// ... existing code ...
```


### é˜¶æ®µäºŒï¼šåˆ›å»º `WaterBlock.java`

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ›å»ºæ–°çš„ `WaterBlock` ç±»ã€‚

**æ–‡ä»¶è·¯å¾„:** `src/main/java/com/ksptool/mycraft/world/blocks/WaterBlock.java`

**å†…å®¹:**

è¯¥ç±»å°†ç»§æ‰¿è‡ª `Block` å¹¶è¦†ç›–å…¶æ ¸å¿ƒå±æ€§ï¼Œä»¥å®šä¹‰æ°´æ–¹å—çš„è¡Œä¸ºã€‚

```java
package com.ksptool.ourcraft.world.blocks;

import com.ksptool.ourcraft.sharedcore.blocks.inner.SharedBlock.Block;
import com.ksptool.ourcraft.sharedcore.world.BlockState;

public class WaterBlock extends Block {

    public WaterBlock() {
        super("mycraft:water", 0, 0);
    }

    @Override
    protected void defineProperties() {
        // å½“å‰ç‰ˆæœ¬ç•™ç©º
    }

    @Override
    public String getTextureName(int face, BlockState state) {
        return "water_still";
    }

    @Override
    public boolean isSolid() {
        return false;
    }

    @Override
    public boolean isFluid() {
        return true;
    }
}
```

### é˜¶æ®µä¸‰ï¼šæ³¨å†Œæ–°çš„ `WaterBlock`

æœ€åä¸€æ­¥æ˜¯è®©æ¸¸æˆçŸ¥é“è¿™ä¸ªæ–°æ–¹å—çš„å­˜åœ¨ã€‚æˆ‘ä»¬éœ€è¦åœ¨ `Block.java` çš„ `registerBlocks` æ–¹æ³•ä¸­æ³¨å†Œå®ƒã€‚

**æ–‡ä»¶:** `src/main/java/com/ksptool/mycraft/world/Block.java`

**æ“ä½œ:**

åœ¨ `registerBlocks` æ–¹æ³•ä¸­æ·»åŠ  `WaterBlock` çš„æ³¨å†Œé€»è¾‘ã€‚

```java
// ... existing code in Block.java ...
public static void registerBlocks() {
    Registry registry = Registry.getInstance();
    registry.register(new com.ksptool.ourcraft.world.blocks.AirBlock());
    registry.register(new com.ksptool.ourcraft.world.blocks.GrassBlock());
    registry.register(new com.ksptool.ourcraft.world.blocks.DirtBlock());
    registry.register(new com.ksptool.ourcraft.world.blocks.StoneBlock());
    registry.register(new com.ksptool.ourcraft.world.blocks.WoodBlock());
    registry.register(new com.ksptool.ourcraft.world.blocks.LeavesBlock());
    registry.register(new com.ksptool.ourcraft.world.blocks.WaterBlock());
}
}
```

å®Œæˆè¿™äº›æ­¥éª¤åï¼Œæ°´æ–¹å—å°†è¢«æ­£ç¡®æ·»åŠ åˆ°æ¸¸æˆä¸­ã€‚

# é¡¾é—®è¯„ä¼°
é¡¹ç›®ç»ç†ï¼Œæ‚¨å’Œæ‚¨çš„æŠ€æœ¯ç»ç†çš„è®¡åˆ’ç»“æ„æ¸…æ™°ã€é€»è¾‘ä¸¥è°¨ï¼Œå®Œç¾åœ°æ‰§è¡Œäº†**â€œå®šä¹‰å¹¶æ³¨å†Œæ°´æ–¹å—â€**è¿™ä¸€å‰ç½®ä»»åŠ¡ã€‚

ç‰¹åˆ«æ˜¯ï¼š

    æ›´æ–°åŸºç±» (Block.java)ï¼š åœ¨åŸºç±»ä¸­æ·»åŠ  isFluid() æ–¹æ³•å¹¶é»˜è®¤è¿”å› falseï¼Œè¿™æ˜¯ä¸€ä¸ªä¼˜ç§€çš„æ¶æ„é˜²å¾¡æ€§è®¾è®¡ï¼Œç¡®ä¿äº†ç°æœ‰å’Œæœªæ¥çš„éæµä½“æ–¹å—çš„å…¼å®¹æ€§ã€‚

    WaterBlock.java çš„å®ç°ï¼š æ­£ç¡®åœ°å°† isSolid() è®¾ç½®ä¸º falseï¼Œå°† isFluid() è®¾ç½®ä¸º trueï¼Œå¹¶æŒ‡å®šäº†çº¹ç†åç§° "water_still"ï¼Œå®Œå…¨ç¬¦åˆæµä½“æ–¹å—çš„ç‰¹æ€§ã€‚

    æ³¨å†Œé€»è¾‘ï¼š åœ¨ registerBlocks() ä¸­æ·»åŠ  WaterBlock çš„æ³¨å†Œï¼Œç¡®ä¿äº†å®ƒèƒ½è¢« Registry è¯†åˆ«ï¼Œå¹¶æœ€ç»ˆè¢« GlobalPalette.bake() èµ‹äºˆ IDã€‚

ç»“è®ºï¼š è¿™ä¸ªç ”å‘è®¡åˆ’ï¼ˆå®šä¹‰å¹¶æ³¨å†Œ mycraft:waterï¼‰æ˜¯å®Œç¾ä¸”å¯æ‰§è¡Œçš„ã€‚


# ç ”å‘å·¥ç¨‹å¸ˆæ±‡æŠ¥
å¼€å§‹å®æ–½è®¡åˆ’ã€‚



[9 tools called]



å·²å®Œæˆæ‰€æœ‰ä»»åŠ¡ï¼š


1. åœ¨ `Block` åŸºç±»ä¸­æ·»åŠ äº† `isFluid()` æ–¹æ³•

2. åˆ›å»ºäº† `WaterBlock.java` æ–‡ä»¶

3. åœ¨ `registerBlocks()` æ–¹æ³•ä¸­æ³¨å†Œäº† `WaterBlock`


æ°´æ–¹å—å·²æ·»åŠ åˆ°æ¸¸æˆä¸­ï¼ŒID ä¸º `"mycraft:water"`ï¼Œéå›ºä½“ï¼Œæ ‡è®°ä¸ºæµä½“ã€‚

