# 研发日志 1.2F1：物理精度全面升级 (Float 至 Double)

大家好！

在 1.2F1 版本中，我们进行了一项非常底层但至关重要的技术升级：**我们将游戏引擎的物理精度从单精度浮点数（Float）全面升级为了双精度浮点数（Double）。**

这听起来可能有点硬核，但让我用大白话来解释一下这对大家的实际游戏体验意味着什么。

## 为什么要这么做？

在很多开放世界游戏中，大家可能遇到过一种被称为“边境之地（Far Lands）”的现象。当你离世界中心（0,0,0）非常非常远的时候，人物走路开始变得一卡一顿，方块的边缘开始闪烁，物理碰撞变得奇怪。

这是因为计算机用 `Float` 存储数字时，数值越大，精度就越低。就像一把尺子，量短物体时很准，量几百公里长的东西时，误差可能就有一米了。

为了彻底解决这个问题，让 OurCraft 支持真正无限广阔的世界，我们决定将底层的数学地基全部推倒重来，换成了精度高出数倍的 `Double`。

## 升级带来了什么？

这次改动涉及了服务端、客户端、网络通信等几乎所有核心模块。虽然你可能不会一眼看到画面变得更炫酷，但你会感觉到游戏“手感”的微妙变化：

*   **真正的无限世界**：现在，无论你跑到距离出生点多远的地方——哪怕是十万、一百万个方块之外，你的移动、跳跃和视角旋转依然会像在出生点一样丝般顺滑。告别远距离下的“画面抖动”和“幽灵位移”。
*   **坚如磐石的物理**：在进行极限跑酷或精细建筑时，物理判定将变得绝对可靠。不再会有“明明没碰到却判定碰撞”或者“明明站稳了却莫名滑下去”的尴尬情况。每一次跳跃的落点，都将精确无误。
*   **更稳定的联机体验**：我们同步升级了网络数据包的精度，这意味着在多人游戏中，其他玩家的移动轨迹将更加平滑，位置同步将更加精准，大大减少了“瞬移”和“回弹”现象。

## 技术细节

为了实现这一点，我们做了一些疯狂的工作：
1.  **底层重构**：将 `Vector3f`（32位）全面迁移至 `Vector3d`（64位），包括所有位置、速度和加速度计算。
2.  **碰撞检测**：`BoundingBox` 现在完全基于 Double 精度运算，消除了大坐标下的精度坍塌。
3.  **网络协议**：虽然这让每个坐标数据包变大了几个字节，但彻底消除了客户端预测与服务端权威状态之间的精度误差。

这是一项“看不见”的工程，但它为 MyCraft 的未来打下了最坚实的地基。无论世界多大，我们都保证每一寸土地的物理规则都是绝对公平和精准的。

感谢大家的支持，让我们在更广阔的世界里相见！
