我们正在完成一个Minecraft项目 现在它还有一点问题
1.鼠标垂直移动摄像机的方向应该调换一下
2.我们似乎需要重新设计方块系统 将每一个方块都抽象为一个类 每个方块有它的耐久度和挖掘等级 尽量与原版Minecraft一致 让我们一步一步开始


# 实体系统重构计划（Entity / LivingEntity / Player）

## 目标

- 抽离通用实体数据与物理到基类，玩家仅保留输入与相机逻辑。
- 引入 AABB `BoundingBox`，为通用碰撞检测做准备。
- 让 `World` 统一管理实体列表，`Game` 主循环逐一更新实体。

## 变更概览

- 新增类：
    - `com.ksptool.mycraft.entity.Entity`
    - `com.ksptool.mycraft.entity.LivingEntity`
    - `com.ksptool.mycraft.entity.BoundingBox`
- 重构：
    - `com.ksptool.mycraft.entity.Player` 继承 `LivingEntity`
    - `com.ksptool.mycraft.world.World` 增加实体列表与管理方法
    - `com.ksptool.mycraft.core.Game` 更新主循环以遍历实体

## 关键设计要点

- Entity（基类）
    - 字段：`World world`, `Vector3f position`, `Vector3f velocity`, `boolean onGround`, `BoundingBox boundingBox`, `UUID uniqueId`, `boolean isDead`
    - 抽象方法：`public abstract void update(float delta)`
    - 构造：`public Entity(World world)`
- LivingEntity（中间类）
    - 字段：`float health`, `float eyeHeight`
    - 常量：`GRAVITY`, `JUMP_VELOCITY`
    - 方法：从 `Player.handlePhysics(float)` 移入为受保护方法；`@Override update(delta){ handlePhysics(delta); }`
- Player（实现类）
    - 继承：`LivingEntity`
    - 保留：`Camera camera`, `Inventory inventory`, `float speed`, `float mouseSensitivity`
    - 构造：`super(world)`，初始化 `camera/inventory`，设置 `eyeHeight`，初始化 `boundingBox`
    - 更新：`super.update(delta)` 后执行 `handleMouse(input)`、`handleKeyboard(input, delta)`、`updateCamera()`
    - 约定：`handleKeyboard` 只影响 `velocity`，不直接改 `position`
- World（实体管理）
    - 新增：`private List<Entity> entities`；`addEntity(Entity)`, `removeEntity(Entity)`, `getEntities()`
    - 碰撞：新增 `canMoveTo(BoundingBox)`；保留旧签名重载以兼容过渡
- Game（主循环）
    - `update(delta)`：遍历 `world.getEntities()` 调用 `entity.update(delta)`；对 `player` 额外调用带 `Input` 的处理

## 涉及文件

- 新建：
    - `src/main/java/com/ksptool/mycraft/entity/BoundingBox.java`
    - `src/main/java/com/ksptool/mycraft/entity/Entity.java`
    - `src/main/java/com/ksptool/mycraft/entity/LivingEntity.java`
- 修改：
    - `src/main/java/com/ksptool/mycraft/entity/Player.java`
    - `src/main/java/com/ksptool/mycraft/world/World.java`
    - `src/main/java/com/ksptool/mycraft/core/Game.java`

## 重要签名示例

- Entity：
```java
public abstract class Entity {
    protected final World world;
    protected final UUID uniqueId;
    protected final Vector3f position = new Vector3f();
    protected final Vector3f velocity = new Vector3f();
    protected boolean onGround;
    protected BoundingBox boundingBox;
    protected boolean isDead;
    public abstract void update(float delta);
}
```

- LivingEntity：
```java
public abstract class LivingEntity extends Entity {
    protected static final float GRAVITY = -20.0f;
    protected static final float JUMP_VELOCITY = 8.0f;
    protected float health = 20.0f;
    protected float eyeHeight = 1.6f;
    @Override public void update(float delta){ handlePhysics(delta); }
    protected void handlePhysics(float delta){ /* 从 Player 迁移完整逻辑 */ }
}
```

- World（新增接口）：
```java
public void addEntity(Entity e);
public void removeEntity(Entity e);
public List<Entity> getEntities();
public boolean canMoveTo(BoundingBox box);
```

- Game（循环调整）
```java
for (Entity e : world.getEntities()) {
    e.update(delta);
}
player.update(input, delta); // 玩家附加输入
```



好的，我将开始执行计划。首先，我来调整鼠标的垂直摄像头控制。

[2 tools called]

好的，摄像头控制已经修改完毕。

现在我将开始方块系统的重构。首先，我需要分析现有的方C块系统实现。

[22 tools called]

好的，我已经完成了您提出的两项任务：

1.  **鼠标垂直移动反转**：我已经修改了代码，现在鼠标垂直移动摄像机的方向应该与之前相反了。
2.  **方块系统重构**：我已经将方块系统重构为一个更具可扩展性的系统。
    *   创建了一个抽象的 `Block` 基类，包含了耐久度和挖掘等级。
    *   为空气、草方块、泥土、石头、木头和树叶创建了具体的方块类。
    *   移除了旧的 `BlockDataManager`，并将纹理逻辑移至各个方块类中。
    *   在游戏启动时自动注册所有方块。

系统现在已经准备好进行下一步的开发。如果您有任何其他问题或需要进一步的修改，请随时告诉我。