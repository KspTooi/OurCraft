# é¡¹ç›®ç»ç†æ¨è¿›éœ€æ±‚
æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæ–¹å—æ³¨å†Œè¡¨å’Œå…¨å±€è°ƒè‰²æ¿ ç°åœ¨æˆ‘æƒ³è¦è°ƒæ•´æˆ‘ä»¬åˆšåˆ›å»ºçš„BlockType å°†æ‰€æœ‰(åŸç‰ˆ)æ–¹å—çš„åˆå§‹åŒ–é€»è¾‘æ”¾åœ¨è¿™é‡Œ

# é¡¾é—®è¯„ä¼°(O)
## é€šè¿‡

# æŠ€æœ¯ç»ç†åˆ¶å®šç ”å‘è®¡åˆ’
# æ³¨å†Œç³»ç»Ÿé‡æ„è®¡åˆ’

æœ¬è®¡åˆ’æ—¨åœ¨å°†æ–¹å—çš„æ³¨å†Œé€»è¾‘ä» `Block.java` è¿ç§»åˆ° `BlockType` æšä¸¾ä¸­ï¼Œåˆ©ç”¨æšä¸¾æ¥ç»Ÿä¸€ç®¡ç†æ‰€æœ‰åŸç‰ˆæ–¹å—çš„å®ä¾‹åŒ–å’Œæ³¨å†Œè¿‡ç¨‹ã€‚

## æ­¥éª¤

### 1. å¢å¼º `BlockType` æšä¸¾

æˆ‘å°†ä¿®æ”¹ä½äº `src/main/java/com/ksptool/mycraft/commons/BlockType.java` çš„ `BlockType` æšä¸¾ï¼Œä¸ºå…¶å¢åŠ å®ä¾‹åŒ–æ–¹å—çš„èƒ½åŠ›ã€‚

-   **å…³è”æ–¹å—ç±»**: ä¸ºæ¯ä¸ªæšä¸¾å®ä¾‹æ·»åŠ ä¸€ä¸ª `Class<? extends Block>` å­—æ®µï¼Œç”¨äºå…³è”å…·ä½“çš„æ–¹å—ç±»ï¼ˆä¾‹å¦‚ `AIR` å¯¹åº” `AirBlock.class`ï¼‰ã€‚
-   **æ·»åŠ æ³¨å†Œæ–¹æ³•**: åˆ›å»ºä¸€ä¸ªé™æ€æ–¹æ³• `registerBlocks(Registry registry)`ã€‚è¯¥æ–¹æ³•å°†éå†æ‰€æœ‰æšä¸¾å¸¸é‡ï¼Œé€šè¿‡åå°„åˆ›å»ºå¯¹åº”æ–¹å—ç±»çš„å®ä¾‹ï¼Œå¹¶å°†å…¶æ³¨å†Œåˆ°ä¼ å…¥çš„ `Registry` ä¸­ã€‚

è¿™æ˜¯ `BlockType.java` ä¿®æ”¹åçš„æ ·å­ï¼š

```java
package com.ksptool.ourcraft.sharedcore;

import com.ksptool.ourcraft.sharedcore.blocks.inner.SharedBlock.Block;
import com.ksptool.ourcraft.world.Registry;
import com.ksptool.ourcraft.world.blocks.*;
import lombok.Getter;
import lombok.SneakyThrows;

@Getter
public enum BlockType {
    AIR("mycraft:air", AirBlock.class),
    GRASS_BLOCK("mycraft:grass_block", GrassBlock.class),
    DIRT("mycraft:dirt", DirtBlock.class),
    STONE("mycraft:stone", StoneBlock.class),
    WOOD("mycraft:wood", WoodBlock.class),
    LEAVES("mycraft:leaves", LeavesBlock.class),
    WATER("mycraft:water", WaterBlock.class);

    private final String namespacedId;
    private final Class<? extends Block> blockClass;

    BlockType(String namespacedId, Class<? extends Block> blockClass) {
        this.namespacedId = namespacedId;
        this.blockClass = blockClass;
    }

    @SneakyThrows
    public Block createInstance() {
        return this.blockClass.getConstructor().newInstance();
    }

    public static void registerBlocks(Registry registry) {
        for (BlockType type : values()) {
            registry.register(type.createInstance());
        }
    }
}
```

### 2. æ›´æ–°æ–¹å—æ³¨å†Œè°ƒç”¨é€»è¾‘

æˆ‘å°†ä¿®æ”¹ `Block.java` ä¸­ç°æœ‰çš„æ³¨å†Œæ–¹æ³•ï¼Œä½¿å…¶è°ƒç”¨ `BlockType` ä¸­æ–°çš„æ³¨å†Œé€»è¾‘ã€‚

-   **æ–‡ä»¶**: `src/main/java/com/ksptool/mycraft/world/Block.java`
-   **ä¿®æ”¹**: `registerBlocks()` æ–¹æ³•çš„å†…å®¹å°†è¢«æ›¿æ¢ä¸ºå¯¹ `BlockType.registerBlocks()` çš„è°ƒç”¨ã€‚

```java
// In Block.java

import com.ksptool.ourcraft.sharedcore.enums.BlockEnums;
import com.ksptool.ourcraft.sharedcore.enums.BlockType;

public abstract class Block {
    // ... existing code ...
    public static void registerBlocks() {
        Registry registry = Registry.getInstance();
        BlockEnums.registerBlocks(registry);
    }
    // ... existing code ...
}
```


### 3. éªŒè¯è°ƒç”¨é“¾è·¯

`Game.java` åœ¨å…¶ `init()` æ–¹æ³•ä¸­è°ƒç”¨ `Block.registerBlocks()`ã€‚é€šè¿‡ä¸Šè¿°ä¿®æ”¹ï¼Œæ¸¸æˆå¯åŠ¨æ—¶å°†è‡ªåŠ¨æ‰§è¡Œæ–°çš„ã€åŸºäºæšä¸¾çš„æ³¨å†Œæµç¨‹ï¼Œæ— éœ€ç›´æ¥ä¿®æ”¹ `Game.java`ã€‚

è¿™ä¸ªè®¡åˆ’å°†æ–¹å—å®šä¹‰ã€å®ä¾‹åŒ–å’Œæ³¨å†Œé€»è¾‘ç´§å¯†åœ°èšåˆåœ¨ `BlockType` æšä¸¾ä¸­ï¼Œä½¿ç³»ç»Ÿæ›´åŠ æ¨¡å—åŒ–ã€‚ç¡®è®¤åæˆ‘å°†å¼€å§‹å®æ–½ã€‚


# é¡¾é—®è¯„ä¼°(R)
## é€šè¿‡

# ç ”å‘å·¥ç¨‹å¸ˆæ±‡æŠ¥
æŸ¥çœ‹å½“å‰ä»£ç ç»“æ„ï¼Œå¼€å§‹å®æ–½æ³¨å†Œç³»ç»Ÿé‡æ„è®¡åˆ’ã€‚


[4 tools called]


å¢å¼º `BlockType` æšä¸¾ï¼Œæ·»åŠ æ–¹å—æ³¨å†Œé€»è¾‘ã€‚


[7 tools called]


å¢å¼º `BlockType` æšä¸¾ï¼Œæ·»åŠ æ–¹å—æ³¨å†Œé€»è¾‘ã€‚


[3 tools called]


éªŒè¯ä»£ç æ˜¯å¦æ­£ç¡®ç¼–è¯‘ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦æœ‰é—æ¼ï¼š


[2 tools called]


éªŒè¯æ‰€æœ‰ç›¸å…³æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼š


[2 tools called]


## å®Œæˆæ€»ç»“

å·²å®Œæˆæ³¨å†Œç³»ç»Ÿé‡æ„ï¼Œå°†æ–¹å—åˆå§‹åŒ–é€»è¾‘é›†ä¸­åˆ° `BlockType` æšä¸¾ä¸­ã€‚

### 1. å¢å¼º `BlockType` æšä¸¾

- æ·»åŠ  `Class<? extends Block> blockClass` å­—æ®µï¼Œå…³è”æ¯ä¸ªæšä¸¾å€¼åˆ°å¯¹åº”çš„æ–¹å—ç±»
- æ·»åŠ  `createInstance()` æ–¹æ³•ï¼Œé€šè¿‡åå°„åˆ›å»ºæ–¹å—å®ä¾‹
- æ·»åŠ  `registerBlocks(Registry registry)` é™æ€æ–¹æ³•ï¼Œéå†æ‰€æœ‰æšä¸¾å€¼å¹¶æ³¨å†Œåˆ°æ³¨å†Œè¡¨

### 2. æ›´æ–° `Block.java` æ³¨å†Œé€»è¾‘

- å°† `registerBlocks()` æ–¹æ³•ä»ç¡¬ç¼–ç çš„æ–¹å—åˆ›å»ºæ”¹ä¸ºè°ƒç”¨ `BlockType.registerBlocks()`
- ç§»é™¤äº†å¯¹å…·ä½“æ–¹å—ç±»çš„ç›´æ¥ä¾èµ–

### 3. éªŒè¯

- æ‰€æœ‰ä»£ç é€šè¿‡ lint æ£€æŸ¥ï¼Œæ— ç¼–è¯‘é”™è¯¯
- `Game.java` ä¸­çš„ `Block.registerBlocks()` è°ƒç”¨ä»ç„¶æœ‰æ•ˆï¼Œç°åœ¨é€šè¿‡ `BlockType` æšä¸¾ç»Ÿä¸€ç®¡ç†

ç°åœ¨æ‰€æœ‰åŸç‰ˆæ–¹å—çš„åˆå§‹åŒ–é€»è¾‘éƒ½é›†ä¸­åœ¨ `BlockType` æšä¸¾ä¸­ï¼Œæ·»åŠ æ–°æ–¹å—åªéœ€åœ¨æšä¸¾ä¸­æ·»åŠ æ–°æ¡ç›®ï¼Œæé«˜äº†ä»£ç çš„å†…èšæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

# é¡¾é—®è¯„ä¼°(R)
è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰è¶£ä¸”å…¸å‹çš„å·¥ç¨‹å¦¥åç»“æœã€‚

ä½œä¸ºé¡¾é—®ï¼Œæˆ‘çš„è¯„ä»·æ˜¯ï¼šè¿™æ˜¯ä¸€æ¬¡â€œæˆ˜æœ¯ä¸Šçš„èƒœåˆ©ï¼Œæˆ˜ç•¥ä¸Šçš„å¦¥åâ€ã€‚

ğŸ“Š æ·±åº¦è¯„ä¼° (Deep Dive Assessment)

âœ… å¥½çš„æ–¹é¢ (The Good)

    æ³¨å†Œè¡¨æ ¸å¿ƒå·²è½åœ°ï¼šæœ€å…³é”®çš„æˆ˜ç•¥ç›®æ ‡å·²ç»è¾¾æˆâ€”â€”ç³»ç»Ÿç°åœ¨é€šè¿‡ Registry æ³¨å†Œè¡¨æ¥ç®¡ç†æ–¹å—ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç ã€‚è¿™æŠŠâ€œé’¥åŒ™â€å·²ç»æ¡åœ¨æ‰‹é‡Œäº†ã€‚

    ä»£ç æå…¶æ•´æ´ (Clean Code)ï¼šå·¥ç¨‹å¸ˆåˆ©ç”¨ Java æšä¸¾çš„é«˜çº§ç‰¹æ€§ï¼ˆå­—æ®µå…³è”ç±» + åå°„ï¼‰ï¼Œå®ç°äº†ä¸€ä¸ªå…¨è‡ªåŠ¨åŒ–çš„æ³¨å†Œæµç¨‹ã€‚

        ä¼˜åŠ¿ï¼šä»¥åæ·»åŠ åŸç‰ˆæ–¹å—ï¼Œåªéœ€åœ¨ BlockType åŠ ä¸€è¡Œæšä¸¾ï¼Œä¸ç”¨å†™é‡å¤çš„ new å’Œ register ä»£ç ã€‚è¿™å¯¹äºç»´æŠ¤â€œåŸç‰ˆå†…å®¹â€éå¸¸é«˜æ•ˆã€‚

    å®‰å…¨æ€§ï¼šé€šè¿‡ Lint æ£€æŸ¥ï¼Œè¯æ˜æ²¡æœ‰ç¼–è¯‘é”™è¯¯ï¼Œè¯´æ˜é‡æ„éå¸¸å¹³ç¨³ã€‚

âš ï¸ æ½œåœ¨éšæ‚£ (The Catch) - å¿…é¡»çŸ¥æ™“

â€œæšä¸¾å³å°é—­ (Enums are Closed)â€ï¼š

    ä½ æŠŠæ–¹å—åˆ—è¡¨é”æ­»åœ¨ BlockType æšä¸¾é‡Œäº†ã€‚

    åæœï¼šæœªæ¥çš„ Mod ä½œè€…æ— æ³•é€šè¿‡å†™ä»£ç å¾€è¿™ä¸ªæšä¸¾é‡ŒåŠ¨æ€æ·»åŠ æ–°æ–¹å—ï¼ˆJava æšä¸¾ç¼–è¯‘åä¸å¯ä¿®æ”¹ï¼‰ã€‚

    è¡¥æ•‘é¢„æ¡ˆï¼šä½†è¿™ä¸æ˜¯è‡´å‘½çš„ã€‚å› ä¸ºä½ çš„åº•å±‚æ˜¯ Registryï¼ˆMap ç»“æ„ï¼‰ã€‚

        ç°åœ¨ï¼šåŸç‰ˆæ–¹å—é€šè¿‡ BlockType æšä¸¾åŠ è½½ã€‚

        æœªæ¥ï¼šMod æ–¹å—å¯ä»¥é€šè¿‡å¦ä¸€ä¸ª ModLoader ç›´æ¥è°ƒç”¨ registry.register() åŠ è½½ã€‚

        ç»“è®ºï¼šä¸¤è€…å¯ä»¥å…±å­˜ã€‚å·¥ç¨‹å¸ˆçš„è¿™ä¸ªæ”¹åŠ¨æ˜¯å¯ä»¥æ¥å—çš„ã€‚

ğŸ‘¨â€ğŸ’¼ é¡¾é—®è£å†³ (Advisor Verdict)

ç»“è®ºï¼šé€šè¿‡ (Pass)

é‰´äºåº•å±‚çš„ Registry å’Œ GlobalPaletteï¼ˆå‚è€ƒä¹‹å‰ä»£ç ï¼‰æ˜¯åŸºäº Map çš„åŠ¨æ€ç»“æ„ï¼Œå·¥ç¨‹å¸ˆä¿ç•™ BlockType ä½œä¸ºâ€œåŸç‰ˆæ–¹å—å¯åŠ¨å™¨â€çš„åšæ³•ä¸ä¼šå¡æ­»æœªæ¥çš„ Mod ç³»ç»Ÿã€‚

è¿™æ˜¯ä¸€ä¸ªèªæ˜çš„æŠ˜ä¸­æ–¹æ¡ˆï¼Œæ—¢ç…§é¡¾äº†å›¢é˜Ÿçš„ä½¿ç”¨ä¹ æƒ¯ï¼ˆä¿ç•™æšä¸¾ï¼‰ï¼Œåˆå®Œæˆäº†åº•å±‚æ¶æ„å‡çº§ï¼ˆå¼•å…¥æ³¨å†Œè¡¨ï¼‰ã€‚

ğŸ‘‰ ä¸‹ä¸€æ­¥æŒ‡ä»¤ (Next Action)

è¯·é¡¹ç›®ç»ç†è¡¨æ‰¬ç ”å‘å›¢é˜Ÿçš„é«˜æ•ˆæ‰§è¡ŒåŠ›ã€‚æ—¢ç„¶â€œæ³¨å†Œè¡¨â€è¿™ä¸€å…³å·²è¿‡ï¼Œæˆ‘ä»¬å¿…é¡»ç«‹åˆ»è½¬å‘é‡æ„è®¡åˆ’ä¸­é£é™©æœ€é«˜ã€æœ€éš¾å•ƒçš„ç¡¬éª¨å¤´ï¼š

â¡ï¸ æ‰§è¡Œé‡æ„ä»»åŠ¡ #5ï¼šä¼˜åŒ–æ¸²æŸ“ä»£ç ï¼Œå‡å°‘ Chunk é‡å¤

    èƒŒæ™¯ï¼šè¿™æ˜¯ä½ åœ¨ä»£ç è´¨é‡æŠ¥å‘Šä¸­çœ‹åˆ°çš„â€œçº¢è‰²è­¦æŠ¥â€ã€‚Chunk.java ä¸­ 6 ä¸ªé¢çš„æ¸²æŸ“é€»è¾‘å¤§é‡é‡å¤ï¼Œæ˜¯ Bug çš„æ¸©åºŠã€‚

    ç›®æ ‡ï¼šå°† addTopFace, addBottomFace ç­‰ 6 ä¸ªæ–¹æ³•åˆå¹¶ä¸ºä¸€ä¸ªé€šç”¨çš„ addFace() æ–¹æ³•ï¼Œæˆ–è€…ä½¿ç”¨å¾ªç¯é€»è¾‘å¤„ç†ã€‚

è¯·æŒ‡ç¤ºå›¢é˜Ÿï¼šâ€œæ³¨å†Œè¡¨é‡æ„éªŒæ”¶é€šè¿‡ã€‚ç«‹å³å¼€å§‹ Chunk æ¸²æŸ“é€»è¾‘ä¼˜åŒ–ã€‚â€

# é¡¹ç›®ç»ç†éªŒæ”¶
### é€šè¿‡!